================================================
File: README.md
================================================
# Magic Patterns - Vite Template

This code was generated by [Magic Patterns](https://magicpatterns.com) for this design: [Source Design](https://magicpatterns.com/c/tXHqGg6JBMDatSkRdmpRrt)

## Getting Started

1. Run `npm install`
2. Run `npm run dev`


================================================
File: index.html
================================================
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=390, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="theme-color" content="#0B4EA2" />
    <title>CATS Transit</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/index.tsx"></script>
  </body>
</html>


================================================
File: package.json
================================================
{
  "name": "magic-patterns-vite-template",
  "version": "0.0.1",
  "private": true,
  "type": "module",
  "homepage": "https://acohen35.github.io/prototype1/",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "lint": "eslint . --ext .js,.jsx,.ts,.tsx",
    "preview": "vite preview",
    "predeploy": "npm run build",
    "deploy": "gh-pages -d dist"
  },
  "dependencies": {
    "lucide-react": "latest",
    "react": "^18.3.1",
    "react-dom": "^18.3.1",
    "react-router-dom": "latest",
    "react-zoom-pan-pinch": "latest"
  },
  "devDependencies": {
    "@types/node": "^20.11.18",
    "@types/react": "^18.3.1",
    "@types/react-dom": "^18.3.1",
    "@typescript-eslint/eslint-plugin": "^5.54.0",
    "@typescript-eslint/parser": "^5.54.0",
    "@vitejs/plugin-react": "^4.2.1",
    "autoprefixer": "latest",
    "eslint": "^8.50.0",
    "eslint-plugin-react-hooks": "^4.6.0",
    "eslint-plugin-react-refresh": "^0.4.1",
    "gh-pages": "^6.3.0",
    "postcss": "latest",
    "tailwindcss": "3.4.17",
    "typescript": "^5.5.4",
    "vite": "^5.2.0"
  }
}


================================================
File: postcss.config.js
================================================
export default {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
}


================================================
File: tailwind.config.js
================================================
export default {
  content: [
    './index.html',
    './src/**/*.{js,ts,jsx,tsx}'
  ],
  darkMode: 'class',
  theme: {
    extend: {},
  },
  plugins: [],
}

================================================
File: tsconfig.json
================================================
{
  "compilerOptions": {
    "target": "ES2020",
    "useDefineForClassFields": true,
    "lib": ["ES2020", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "resolveJsonModule": true,
    "isolatedModules": true,
    "noEmit": true,
    "jsx": "react-jsx",

    /* Linting */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noFallthroughCasesInSwitch": true
  },
  "include": ["src"],
  "references": [{ "path": "./tsconfig.node.json" }]
}


================================================
File: tsconfig.node.json
================================================
{
  "compilerOptions": {
    "composite": true,
    "skipLibCheck": true,
    "module": "ESNext",
    "moduleResolution": "bundler",
    "allowSyntheticDefaultImports": true,
    "strict": true
  },
  "include": ["vite.config.ts"]
}


================================================
File: vite.config.ts
================================================
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

// https://vitejs.dev/config/
export default defineConfig({
  plugins: [react()],
  base: '/prototype1/',
})


================================================
File: .eslintrc.cjs
================================================
module.exports = {
  root: true,
  env: { browser: true, es2020: true },
  extends: [
    'eslint:recommended',
    'plugin:@typescript-eslint/recommended',
    'plugin:react-hooks/recommended',
  ],
  ignorePatterns: ['dist', '.eslintrc.cjs'],
  parser: '@typescript-eslint/parser',
  plugins: ['react-refresh'],
  rules: {
    'react-refresh/only-export-components': [
      'warn',
      { allowConstantExport: true },
    ],
  },
}


================================================
File: src/App.tsx
================================================
import React, { useState } from "react";
import { MemoryRouter as Router, Routes, Route } from "react-router-dom";
import { SplashScreen } from "./components/SplashScreen";
import { MainLayout } from "./components/MainLayout";
import { HistoryView } from "./components/HistoryView";
import { RouteSelector } from "./components/RouteSelector";
import { UpcomingRouteSelector } from "./components/UpcomingRouteSelector";
import { UpcomingStationSelector } from "./components/UpcomingStationSelector";
import { ScheduleView } from "./components/ScheduleView";
import { UpcomingView } from "./components/UpcomingView";
import { MapView } from "./components/MapView";
import { DarkModeProvider } from "./contexts/DarkModeContext";
import { LanguageProvider } from "./contexts/LanguageContext";
import { UnitPreferenceProvider } from "./contexts/UnitPreferenceContext";

export function App() {
    const [savedRoutes, setSavedRoutes] = useState<string[]>([]);
    return (
        <LanguageProvider>
            <UnitPreferenceProvider>
                <DarkModeProvider>
                    <Router>
                <Routes>
                    <Route path="/" element={<SplashScreen />} />
                    <Route element={<MainLayout savedRoutes={savedRoutes} setSavedRoutes={setSavedRoutes} />}>
                        <Route path="/history" element={<HistoryView savedRoutes={savedRoutes} setSavedRoutes={setSavedRoutes} />} />
                        <Route path="/route" element={<RouteSelector />} />
                        <Route
                            path="/upcoming"
                            element={
                                <UpcomingView
                                    savedRoutes={savedRoutes}
                                    setSavedRoutes={setSavedRoutes}
                                />
                            }
                        />
                        <Route path="/upcoming/route" element={<UpcomingRouteSelector />} />
                        <Route path="/upcoming/station" element={<UpcomingStationSelector />} />
                        <Route path="/schedule" element={<ScheduleView />} />
                        <Route path="/map" element={<MapView />} />
                    </Route>
                </Routes>
                    </Router>
                </DarkModeProvider>
            </UnitPreferenceProvider>
        </LanguageProvider>
    );
}


================================================
File: src/index.css
================================================
@import 'tailwindcss/base';
@import 'tailwindcss/components';
@import 'tailwindcss/utilities';

/* Global styles to enforce phone frame */
html, body {
  margin: 0;
  padding: 0;
  overflow: hidden;
  position: fixed;
  width: 100%;
  height: 100%;
  overscroll-behavior: none;
  -webkit-overflow-scrolling: touch;
}

#root {
  width: 100%;
  height: 100%;
  overflow: hidden;
}

/* Prevent pull-to-refresh and other unwanted behaviors */
body {
  touch-action: none;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  user-select: none;
  background: #f3f4f6;
}

/* Enable scrolling only within phone frame content */
.overflow-y-auto {
  -webkit-overflow-scrolling: touch;
  touch-action: pan-y;
}

================================================
File: src/index.tsx
================================================
import './index.css';
import React from "react";
import { render } from "react-dom";
import { App } from "./App";
render(<App />, document.getElementById("root"));

================================================
File: src/package.json
================================================
{
  "dependencies": {
    "react-zoom-pan-pinch": "^3.1.0"
  }
}

================================================
File: src/components/HistoryView.tsx
================================================
import React from "react";
import { Bus } from "lucide-react";
import { useNavigate } from "react-router-dom";

interface HistoryViewProps {
  savedRoutes: string[];
  setSavedRoutes: React.Dispatch<React.SetStateAction<string[]>>;
}

export function HistoryView({ savedRoutes, setSavedRoutes }: HistoryViewProps) {
  const navigate = useNavigate();

  const handleRouteClick = (route: string) => {
    // Parse the route string to extract information
    // Format: "[route]: [fromStation] to [toStation]"
    const [routeName, stations] = route.split(": ");
    const [fromStation, toStation] = stations.split(" to ");
    
    // Navigate to the schedule view with the parsed information
    navigate("/schedule", { state: { selectedRoute: routeName, fromStation, toStation } });
  };

  return (
    <div className="p-4">
      <h2 className="text-2xl font-bold mb-4">History</h2>
      <div className="space-y-4">
        {savedRoutes.length === 0 ? (
          <p className="text-gray-500">No saved routes yet. Select routes from Upcoming or Schedule tabs to save them here.</p>
        ) : (
          savedRoutes.map((route, index) => {
            const [routeName, stations] = route.split(": ");
            const [fromStation, toStation] = stations.split(" to ");
            return (
              <div 
                key={index} 
                className="flex items-center gap-4 p-4 border-b cursor-pointer hover:bg-gray-50"
                onClick={() => handleRouteClick(route)}
              >
                <Bus className="text-gray-600" />
                <div className="flex-1">
                  <h3 className="font-bold">{routeName}</h3>
                  <div className="flex justify-between text-gray-600">
                    <span>{fromStation}</span>
                    <span>{toStation}</span>
                  </div>
                </div>
              </div>
            );
          })
        )}
      </div>
    </div>
  );
}

================================================
File: src/components/InfoButton.tsx
================================================
import React from "react";
import { MoreVertical } from "lucide-react";
export function InfoButton() {
  return <button className="w-8 h-8 flex items-center justify-center rounded-full bg-gray-100">
      <MoreVertical size={20} className="text-gray-600" />
    </button>;
}

================================================
File: src/components/MainLayout.tsx
================================================
import React, { useState } from "react";
import { Outlet, useLocation, useNavigate } from "react-router-dom";
import { TabBar } from "./TabBar";
import { Settings, ChevronDown, ChevronUp } from "lucide-react";
import { SettingsDialog } from "./SettingsDialog";
import { PhoneFrame } from "./PhoneFrame";

interface MainLayoutProps {
    savedRoutes: string[];
    setSavedRoutes: React.Dispatch<React.SetStateAction<string[]>>;
}

export function MainLayout({ savedRoutes, setSavedRoutes }: MainLayoutProps) {
    const location = useLocation();
    const navigate = useNavigate();
    const [isSettingsOpen, setIsSettingsOpen] = useState(false);
    const [isTipsExpanded, setIsTipsExpanded] = useState(false);

    const handleRouteClick = (route: string) => {
        // Parse the route string to extract information
        // Format: "[route]: [fromStation] to [toStation]"
        const [routeName, stations] = route.split(": ");
        const [fromStation, toStation] = stations.split(" to ");
        
        // Navigate to the schedule view with the parsed information
        navigate("/schedule", { state: { selectedRoute: routeName, fromStation, toStation } });
    };

    const isHomePage = location.pathname === "/history";
    
    return (
        <PhoneFrame>
            <div className="relative flex flex-col h-full">
                <header className="flex items-center justify-between p-4 border-b dark:border-gray-700">
                    <TabBar />
                    <button
                        onClick={() => setIsSettingsOpen(true)}
                        className="text-gray-600 hover:text-gray-800"
                    >
                        <Settings size={24} />
                    </button>
                </header>
                <SettingsDialog
                    isOpen={isSettingsOpen}
                    onClose={() => setIsSettingsOpen(false)}
                />
                <main className="flex-1 flex flex-col overflow-hidden">
                    {isHomePage ? (
                        <table className="w-full">
                        <tbody>
                            <tr>
                                <td>
                                    {/* Onboarding Tips and Usage Guidelines */}
                                    <div className="p-4">
                                        <div className="flex items-center justify-between cursor-pointer" onClick={() => setIsTipsExpanded(!isTipsExpanded)}>
                                            <h2 className="text-xl font-semibold dark:text-white">Onboarding Tips</h2>
                                            <button className="text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200">
                                                {isTipsExpanded ? <ChevronUp size={24} /> : <ChevronDown size={24} />}
                                            </button>
                                        </div>
                                        
                                        {isTipsExpanded && (
                                            <div className="mt-4 space-y-3 dark:text-gray-300">
                                                <p className="font-medium">1. Navigation</p>
                                                <ul className="list-disc pl-6 space-y-2">
                                                    <li>Use the top navigation bar to switch between different views: Upcoming, Schedule, Map, and History</li>
                                                    <li>Access settings anytime using the gear icon in the top-right corner</li>
                                                </ul>
                                                
                                                <p className="font-medium">2. Planning Your Route</p>
                                                <ul className="list-disc pl-6 space-y-2">
                                                    <li>Start in the Schedule tab to plan your journey</li>
                                                    <li>Select your starting station and destination</li>
                                                    <li>View available routes and timings</li>
                                                    <li>Save frequently used routes for quick access</li>
                                                </ul>

                                                <p className="font-medium">3. Real-time Updates</p>
                                                <ul className="list-disc pl-6 space-y-2">
                                                    <li>Check the Upcoming tab for immediate departures</li>
                                                    <li>Use the Map view to see route visualizations</li>
                                                    <li>View your saved and recent routes in the History tab</li>
                                                </ul>

                                                <p className="font-medium">4. Customization</p>
                                                <ul className="list-disc pl-6 space-y-2">
                                                    <li>Toggle dark/light mode in settings</li>
                                                    <li>Manage your saved routes from this page</li>
                                                    <li>Click on any saved route to quickly view its schedule</li>
                                                </ul>
                                            </div>
                                        )}
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    {/* Saved Routes */}
                                    <div className="p-4">
                                        <h2 className="text-xl font-semibold dark:text-white">Saved Routes</h2>
                                        <div className="mt-4 space-y-2">
                                            {savedRoutes.length === 0 ? (
                                                <p className="text-gray-500 dark:text-gray-400">No saved routes yet. Select routes from Upcoming or Schedule tabs to save them here.</p>
                                            ) : (
                                                savedRoutes.map((route, index) => (
                                                    <div key={index} className="flex items-center justify-between bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                                        <button
                                                            onClick={() => handleRouteClick(route)}
                                                            className="text-left flex-1 hover:text-[#0B4EA2] dark:text-gray-200 dark:hover:text-[#4B8FE2]"
                                                        >
                                                            <span>{route}</span>
                                                        </button>
                                                        <button
                                                            onClick={() => setSavedRoutes(routes => routes.filter((_, i) => i !== index))}
                                                            className="text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 ml-4"
                                                        >
                                                            Remove
                                                        </button>
                                                    </div>
                                                ))
                                            )}
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                ) : (
                    <Outlet />
                )}
            </main>
            </div>
        </PhoneFrame>
    );
}

================================================
File: src/components/MapView.tsx
================================================
import React, { useState } from "react";
import { ChevronDown } from "lucide-react";
import { ZoomableImage } from "./ZoomableImage";
import { ScheduleDialog } from "./ScheduleDialog";
import { useLanguage } from "../contexts/LanguageContext";
import { useFormatDistance } from "../utils/formatDistance";

const getImageUrl = (path: string) => `/prototype1${path}`;
type RouteCategory = "bus" | "blue" | "gold";
type Direction = "inbound" | "outbound";
interface RouteStop {
  id: number;
  name: string;
}
interface RouteMap {
  id: string;
  name: string;
  category: RouteCategory;
  imageUrl: string;
  stops: RouteStop[];
}

export function MapView() {
  const { t } = useLanguage();
  const { formatDistance } = useFormatDistance();
  const [selectedCategory, setSelectedCategory] = useState<RouteCategory | null>(null);
  const [selectedRoute, setSelectedRoute] = useState<RouteMap | null>(null);
  const [direction, setDirection] = useState<Direction>("inbound");
  const [isDropdownOpen, setIsDropdownOpen] = useState(false);
  const [isScheduleOpen, setIsScheduleOpen] = useState(false);
  const [selectedStop, setSelectedStop] = useState<string | null>(null);
  
  const categories = [{
    id: "bus",
    name: t('busRoutes'),
    routes: ROUTE_MAPS.filter(r => r.category === "bus")
  }, {
    id: "blue",
    name: t('blueLineRoute'),
    routes: [{
      id: "501",
      name: "501 - Light Rail - Lynx Blue Line",
      category: "blue",
      imageUrl: getImageUrl("/LightRailLynxBlueLine501.gif"),
      stops: [
        // ... (stops remain unchanged)
      ]
    }]
  }, {
    id: "gold",
    name: t('goldLineRoute'),
    routes: [{
      id: "510",
      name: "510 - CityLYNX Gold Line",
      category: "gold",
      imageUrl: getImageUrl("/CityLynxGoldLine510.gif"),
      stops: [
        // ... (stops remain unchanged)
      ]
    }]
  }];

  const filteredRoutes = selectedCategory ? ROUTE_MAPS.filter(route => route.category === selectedCategory) : [];

  return (
    <div className="flex flex-col min-h-screen bg-white overflow-auto">
      <div className="p-4 pb-20">
        {/* CATS Logo */}
        <div className="flex justify-center mb-4">
          <img src={getImageUrl("/logos/CatslogoBW-1024x282.webp")} alt="CATS Logo" className="h-16 object-contain" />
        </div>
        
        {/* Route Categories */}
        <div className="space-y-2">
          {categories.map(category => (
            <button
              key={category.id}
              className={`w-full p-4 text-left rounded-lg transition-colors ${
                selectedCategory === category.id
                  ? "bg-[#0B4EA2] text-white"
                  : "bg-white border hover:bg-gray-50"
              }`}
              onClick={() => {
                setSelectedCategory(category.id as RouteCategory);
                if (category.id === "blue" || category.id === "gold") {
                  const route = category.routes[0];
                  setSelectedRoute({
                    ...route,
                    category: category.id as RouteCategory
                  });
                } else {
                  setSelectedRoute(null);
                }
              }}
            >
              {category.name}
            </button>
          ))}
        </div>

        {selectedCategory === "blue" && (
          <div className="bg-white rounded-lg p-4 space-y-4">
            <div className="space-y-4">
              {/* Route Selection */}
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">{t('route')}:</label>
                <select className="w-full p-3 border rounded-lg bg-white">
                  <option>501 - Light Rail - Lynx Blue Line</option>
                </select>
              </div>
              
              {/* Direction Selection */}
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">{t('direction')}:</label>
                <div className="space-y-2">
                  <label className="flex items-center">
                    <input
                      type="radio"
                      name="direction"
                      value="inbound"
                      checked={direction === "inbound"}
                      onChange={e => setDirection("inbound")}
                      className="mr-2"
                    />
                    {t('inbound')}
                  </label>
                  <label className="flex items-center">
                    <input
                      type="radio"
                      name="direction"
                      value="outbound"
                      checked={direction === "outbound"}
                      onChange={e => setDirection("outbound")}
                      className="mr-2"
                    />
                    {t('outbound')}
                  </label>
                </div>
              </div>
              
              {/* Day Selection */}
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">{t('day')}:</label>
                <select className="w-full p-3 border rounded-lg bg-white">
                  <option>{t('weekdays')}</option>
                  <option>{t('saturday')}</option>
                  <option>{t('sunday')}</option>
                </select>
              </div>
              
              {/* Show Schedule Button */}
              <button className="w-full bg-[#0B4EA2] text-white py-3 px-4 rounded-lg font-medium">
                {t('showSchedule')}
              </button>
              
              {/* Map */}
              <div className="mt-4 bg-white rounded-lg overflow-hidden">
                <ZoomableImage
                  src={getImageUrl("/LightRailLynxBlueLine501.gif")}
                  alt="Blue Line Map"
                />
              </div>
              
              {/* Station List */}
              <div className="space-y-2">
                {categories.find(c => c.id === "blue")?.routes[0].stops
                  .sort((a, b) => direction === "inbound" ? a.id - b.id : b.id - a.id)
                  .map(stop => (
                    <div key={stop.id} className="flex items-center justify-between p-4 bg-white border rounded-lg">
                      <div className="flex items-center gap-4">
                        <div className="w-8 h-8 bg-[#0B4EA2] text-white rounded-lg flex items-center justify-center font-bold">
                          {stop.id}
                        </div>
                        <span className="text-gray-900">{stop.name}</span>
                      </div>
                      <button
                        className="text-[#0B4EA2] font-bold text-2xl"
                        onClick={() => {
                          setSelectedStop(stop.name);
                          setIsScheduleOpen(true);
                        }}
                      >
                        +
                      </button>
                    </div>
                  ))}
              </div>
            </div>
          </div>
        )}
        
        {selectedCategory === "gold" && (
          <div className="bg-white rounded-lg p-4 space-y-4">
            <div className="space-y-4">
              {/* Route Selection */}
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">{t('route')}:</label>
                <select className="w-full p-3 border rounded-lg bg-white">
                  <option>510 - CityLYNX Gold Line</option>
                </select>
              </div>
              
              {/* Direction Selection */}
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">{t('direction')}:</label>
                <div className="space-y-2">
                  <label className="flex items-center">
                    <input
                      type="radio"
                      name="direction"
                      value="inbound"
                      checked={direction === "inbound"}
                      onChange={e => setDirection("inbound")}
                      className="mr-2"
                    />
                    {t('inbound')}
                  </label>
                  <label className="flex items-center">
                    <input
                      type="radio"
                      name="direction"
                      value="outbound"
                      checked={direction === "outbound"}
                      onChange={e => setDirection("outbound")}
                      className="mr-2"
                    />
                    {t('outbound')}
                  </label>
                </div>
              </div>
              
              {/* Day Selection */}
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">{t('day')}:</label>
                <select className="w-full p-3 border rounded-lg bg-white">
                  <option>{t('weekdays')}</option>
                  <option>{t('saturday')}</option>
                  <option>{t('sunday')}</option>
                </select>
              </div>
              
              {/* Show Schedule Button */}
              <button className="w-full bg-[#0B4EA2] text-white py-3 px-4 rounded-lg font-medium">
                {t('showSchedule')}
              </button>
              
              {/* Map */}
              <div className="mt-4 bg-white rounded-lg overflow-hidden">
                <ZoomableImage
                  src={getImageUrl("/CityLynxGoldLine510.gif")}
                  alt="Gold Line Map"
                />
              </div>
              
              {/* Station List */}
              <div className="space-y-2">
                {categories.find(c => c.id === "gold")?.routes[0].stops
                  .sort((a, b) => direction === "inbound" ? a.id - b.id : b.id - a.id)
                  .map(stop => (
                    <div key={stop.id} className="flex items-center justify-between p-4 bg-white border rounded-lg">
                      <div className="flex items-center gap-4">
                        <div className="w-8 h-8 bg-[#0B4EA2] text-white rounded-lg flex items-center justify-center font-bold">
                          {stop.id}
                        </div>
                        <span className="text-gray-900">{stop.name}</span>
                      </div>
                      <button
                        className="text-[#0B4EA2] font-bold text-2xl"
                        onClick={() => {
                          setSelectedStop(stop.name);
                          setIsScheduleOpen(true);
                        }}
                      >
                        +
                      </button>
                    </div>
                  ))}
              </div>
            </div>
          </div>
        )}
        
        {selectedCategory === "bus" && (
          <div className="bg-white rounded-lg p-4 space-y-4">
            <div className="space-y-4">
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-1">
                  {t('route')}:
                </label>
                <select className="w-full p-2 border rounded-md" onChange={e => {
                  const route = ROUTE_MAPS.find(r => r.id === e.target.value);
                  setSelectedRoute(route || null);
                }}>
                  <option value="">{t('selectRoute')}</option>
                  {filteredRoutes.map(route => (
                    <option key={route.id} value={route.id}>
                      {route.name}
                    </option>
                  ))}
                </select>
              </div>
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  {t('direction')}:
                </label>
                <div className="flex gap-4">
                  <label className="flex items-center">
                    <input
                      type="radio"
                      name="direction"
                      value="inbound"
                      checked={direction === "inbound"}
                      onChange={e => setDirection("inbound")}
                      className="mr-2"
                    />
                    {t('inbound')}
                  </label>
                  <label className="flex items-center">
                    <input
                      type="radio"
                      name="direction"
                      value="outbound"
                      checked={direction === "outbound"}
                      onChange={e => setDirection("outbound")}
                      className="mr-2"
                    />
                    {t('outbound')}
                  </label>
                </div>
              </div>
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-1">
                  {t('day')}:
                </label>
                <select className="w-full p-2 border rounded-md">
                  <option>{t('weekdays')}</option>
                  <option>{t('saturday')}</option>
                  <option>{t('sunday')}</option>
                </select>
              </div>
              <button className="w-full bg-[#0B4EA2] text-white py-2 px-4 rounded-md">
                {t('showSchedule')}
              </button>
            </div>
            {selectedRoute && (
              <>
                <div className="mt-4 bg-white rounded-lg overflow-hidden border">
                  <ZoomableImage
                    src={getImageUrl(selectedRoute.imageUrl)}
                    alt={`Map for ${selectedRoute.name}`}
                  />
                </div>
                <div className="space-y-2">
                  {selectedRoute.stops.map(stop => (
                    <div key={stop.id} className="flex items-center justify-between p-3 border-b">
                      <div className="flex items-center gap-3">
                        <div className="w-8 h-8 bg-gray-200 rounded-lg flex items-center justify-center font-bold">
                          {stop.id}
                        </div>
                        <span>{stop.name}</span>
                      </div>
                      <button
                        className="text-[#0B4EA2] font-bold text-xl"
                        onClick={() => {
                          setSelectedStop(stop.name);
                          setIsScheduleOpen(true);
                        }}
                      >
                        +
                      </button>
                    </div>
                  ))}
                </div>
              </>
            )}
          </div>
        )}
      </div>
      <ScheduleDialog
        isOpen={isScheduleOpen}
        onClose={() => {
          setIsScheduleOpen(false);
          setSelectedStop(null);
        }}
        stopName={selectedStop || ""}
      />
    </div>
  );
}

// Route data
const ROUTE_MAPS: RouteMap[] = [
  // ... (route data remains unchanged)
];


================================================
File: src/components/PhoneFrame.tsx
================================================
import React from 'react';

export function PhoneFrame({ children }: { children: React.ReactNode }) {
  return (
    <div className="relative min-h-screen flex items-center justify-center bg-gradient-to-b from-blue-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 p-4">
      <div className="relative w-[390px]">
        {/* Phone Frame */}
        <div className="absolute inset-0 bg-black rounded-[3rem] shadow-2xl pointer-events-none">
          {/* Status Bar */}
          <div className="absolute top-0 inset-x-0 h-7 bg-black rounded-t-[3rem] flex items-center justify-between px-8">
            <div className="text-white text-xs">9:41</div>
            <div className="flex items-center space-x-2">
              <div className="w-4 h-4 rounded-full border border-white"></div>
              <div className="w-4 h-4 rounded-full border border-white"></div>
              <div className="w-6 h-3 rounded-md border border-white"></div>
            </div>
          </div>
          {/* Notch */}
          <div className="absolute top-0 left-1/2 -translate-x-1/2 w-40 h-7 bg-black">
            <div className="absolute top-2 left-1/2 -translate-x-1/2 w-20 h-4 bg-black rounded-b-2xl"></div>
          </div>
          {/* Side Button */}
          <div className="absolute top-20 -right-1 w-1 h-12 bg-gray-800 rounded-r shadow-lg"></div>
          {/* Volume Buttons */}
          <div className="absolute top-20 -left-1 w-1 h-8 bg-gray-800 rounded-l shadow-lg mb-2"></div>
          <div className="absolute top-32 -left-1 w-1 h-8 bg-gray-800 rounded-l shadow-lg"></div>
          {/* Home Indicator */}
          <div className="absolute bottom-1 left-1/2 -translate-x-1/2 w-32 h-1 bg-gray-600 rounded-full"></div>
        </div>
        {/* Screen Content */}
        <div className="relative bg-white dark:bg-gray-900 rounded-[2.5rem] h-[800px] overflow-hidden">
          <div className="relative h-full overflow-y-auto">
            {children}
          </div>
        </div>
      </div>
    </div>
  );
}

================================================
File: src/components/RouteSelector.tsx
================================================
import React, { useState } from "react";
import { useNavigate } from "react-router-dom";
import { Bus, ArrowLeft, Search, Train } from "lucide-react";

interface RouteType {
  id: string;
  name: string;
  type: "rail" | "bus";
  color?: string;
}

// Helper function to get numeric value from route id
const getNumericId = (id: string): number => {
  const numericPart = parseInt(id.replace(/[^\d]/g, ''));
  return isNaN(numericPart) ? 0 : numericPart;
};

// Define rail routes
const railRoutes: RouteType[] = [
  {
    id: "501",
    name: "Light Rail - Lynx Blue Line",
    type: "rail",
    color: "text-[#0B4EA2]"
  },
  {
    id: "510",
    name: "CityLYNX Gold Line",
    type: "rail",
    color: "text-yellow-500"
  }
];

// Define bus routes
const unsortedBusRoutes: RouteType[] = [
  { id: "1", name: "Mt. Holly Road", type: "bus" },
  { id: "2", name: "Ashley/Scaleybark Crosstown", type: "bus" },
  { id: "3", name: "The Plaza", type: "bus" },
  { id: "4", name: "Belmont", type: "bus" },
  { id: "5", name: "Airport", type: "bus", color: "text-green-600" },
  { id: "6", name: "Kings Drive", type: "bus" },
  { id: "7", name: "Beatties Ford", type: "bus" },
  { id: "8", name: "Tuckaseegee Road", type: "bus" },
  { id: "9", name: "Central Avenue", type: "bus" },
  { id: "10", name: "West Boulevard", type: "bus" },
  { id: "11", name: "North Tryon", type: "bus" },
  { id: "12", name: "South Blvd", type: "bus" },
  { id: "13", name: "Nevin Rd", type: "bus" },
  { id: "14", name: "Providence Road", type: "bus" },
  { id: "15", name: "Randolph Rd", type: "bus" },
  { id: "16", name: "South Tryon", type: "bus" },
  { id: "18", name: "Paw Creek - Rosa Parks", type: "bus" },
  { id: "19", name: "Park Road", type: "bus" },
  { id: "20", name: "Queens Rd", type: "bus" },
  { id: "21", name: "Statesville Ave", type: "bus" },
  { id: "23", name: "Shamrock Dr", type: "bus" },
  { id: "24", name: "Nations Ford Rd", type: "bus" },
  { id: "26", name: "Oaklawn Ave", type: "bus" },
  { id: "27", name: "Monroe Rd", type: "bus" },
  { id: "29", name: "UNC Charlotte - JW Clay", type: "bus" },
  { id: "30", name: "Woodlawn Crosstown", type: "bus" },
  { id: "35", name: "Wilkinson BLVD", type: "bus" },
  { id: "40", name: "Lawyers RD", type: "bus" },
  { id: "41x", name: "Steele Creek", type: "bus" },
  { id: "48x", name: "Northcross", type: "bus" },
  { id: "50", name: "URP CIC", type: "bus" },
  { id: "51", name: "Pineville Matthews Rd", type: "bus" },
  { id: "52x", name: "Idlewild Rd", type: "bus" },
  { id: "53x", name: "Northlake", type: "bus" },
  { id: "54", name: "University Research Park", type: "bus" },
  { id: "55", name: "Westinghouse", type: "bus" },
  { id: "58", name: "Pineville", type: "bus" },
  { id: "59", name: "North Meck Connector", type: "bus" },
  { id: "60", name: "Tyvola", type: "bus" },
  { id: "62x", name: "Rea Road", type: "bus" },
  { id: "63x", name: "Huntersville", type: "bus" },
  { id: "64x", name: "Independence Blvd", type: "bus" },
  { id: "74x", name: "Union County", type: "bus" },
  { id: "77x", name: "North Meck", type: "bus" },
  { id: "82x", name: "Rock Hill", type: "bus" },
  { id: "88x", name: "Mountain Island", type: "bus" },
  { id: "97", name: "Village Rider", type: "bus" },
  { id: "98", name: "Village Rider McCoy Rd", type: "bus" },
  { id: "99", name: "Village Rider Huntersville", type: "bus" },
  { id: "211", name: "Hidden Valley", type: "bus" },
  { id: "221", name: "E Harris Blvd - Idlewild", type: "bus" },
  { id: "222", name: "Pence Rd", type: "bus" },
  { id: "235", name: "West Charlotte Connector", type: "bus" },
  { id: "290", name: "Davidson Shuttle", type: "bus" }
];

// Sort bus routes by numeric id
const busRoutes = unsortedBusRoutes.sort((a, b) => getNumericId(a.id) - getNumericId(b.id));

// Combine rail and bus routes
const ROUTES: RouteType[] = [...railRoutes, ...busRoutes];

export function RouteSelector() {
  const navigate = useNavigate();
  
  return (
    <div className="flex flex-col min-h-screen bg-white">
      <div className="bg-[#0B4EA2] text-white p-4 flex items-center gap-4">
        <button onClick={() => navigate("/schedule")}>
          <ArrowLeft size={24} />
        </button>
        <h1 className="text-xl">Select a route</h1>
      </div>
      <div className="border-b">
        <div className="flex">
          <button className="flex-1 py-4 text-[#0B4EA2] border-b-2 border-[#0B4EA2]">
            All Routes
          </button>
          <button className="flex-1 py-4 text-gray-600">History</button>
        </div>
      </div>
      <div className="flex-1 bg-gray-50 overflow-y-auto pb-20">
        {ROUTES.map(route => (
          <button
            key={route.id}
            className="w-full flex items-center gap-4 p-4 border-b bg-white"
            onClick={() => {
              navigate("/schedule", {
                state: {
                  selectedRoute: `${route.id} - ${route.name}`
                }
              });
            }}
          >
            {route.type === "rail" ? (
              <Train size={20} className={route.color || "text-gray-600"} />
            ) : (
              <Bus size={20} className={route.color || "text-gray-600"} />
            )}
            <span className="text-gray-900">
              {route.id} - {route.name}
            </span>
          </button>
        ))}
      </div>
      <div className="fixed bottom-4 right-4">
        <button className="w-14 h-14 rounded-full bg-[#0B4EA2] text-white flex items-center justify-center shadow-lg">
          <Search size={24} />
        </button>
      </div>
    </div>
  );
}

================================================
File: src/components/ScheduleDialog.tsx
================================================
import React from "react";
import { X } from "lucide-react";
interface ScheduleDialogProps {
  isOpen: boolean;
  onClose: () => void;
  stopName: string;
}
const SCHEDULE_TIMES = ["5:30 AM", "6:00 AM", "6:30 AM", "7:00 AM", "7:30 AM", "8:00 AM", "8:30 AM", "9:00 AM", "9:30 AM", "10:00 AM", "10:30 AM", "11:00 AM", "11:30 AM", "12:00 PM", "12:30 PM", "1:00 PM", "1:30 PM", "2:00 PM", "2:30 PM", "3:00 PM", "3:30 PM", "4:00 PM", "4:30 PM", "5:00 PM", "5:30 PM", "6:00 PM", "6:30 PM", "7:00 PM", "7:30 PM", "8:00 PM"];
export function ScheduleDialog({
  isOpen,
  onClose,
  stopName
}: ScheduleDialogProps) {
  if (!isOpen) return null;
  return <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
      <div className="bg-white rounded-lg w-full max-w-md">
        <div className="flex items-center justify-between p-4 border-b">
          <h2 className="font-bold text-lg">{stopName}</h2>
          <button onClick={onClose}>
            <X size={24} />
          </button>
        </div>
        <div style={{
        height: "calc(7.5 * 48px)"
      }} className="overflow-y-auto">
          <table className="w-full">
            <tbody>
              {SCHEDULE_TIMES.map((time, index) => <tr key={time} className={index % 2 === 0 ? "bg-[#0B4EA2]" : "bg-white"}>
                  <td className={`py-3 px-4 ${index % 2 === 0 ? "text-white" : "text-black"}`}>
                    {time}
                  </td>
                </tr>)}
            </tbody>
          </table>
        </div>
      </div>
    </div>;
}

================================================
File: src/components/ScheduleView.tsx
================================================
import React from "react";
import { ChevronRight, ArrowLeft } from "lucide-react";
import { useLocation, useNavigate } from "react-router-dom";
import { routeDestinations } from "../data/routeDestinations";

interface StationTime {
  station: string;
  time: string;
}

interface TimeSlot {
  startStation: string;
  startTime: string;
  stops: StationTime[];
}

interface ScheduleViewProps {}

export function ScheduleView() {
  const location = useLocation();
  const navigate = useNavigate();
  const [selectedDirection, setSelectedDirection] = React.useState<string | null>(null);
  const [selectedWeekday, setSelectedWeekday] = React.useState<string | null>(null);
  const [showDirectionModal, setShowDirectionModal] = React.useState(false);
  const [showWeekdayModal, setShowWeekdayModal] = React.useState(false);
  const [expandedTimeSlot, setExpandedTimeSlot] = React.useState<number | null>(null);
  
  const { selectedRoute } = location.state || {};
  
  // Helper function to add minutes to a time string
  const addMinutes = (time: string, minutes: number): string => {
    const [hourStr, minuteStr] = time.split(":");
    const [hour, period] = hourStr.split(" ");
    let totalMinutes = parseInt(hour) * 60 + parseInt(minuteStr) + minutes;
    
    if (period === "PM" && hour !== "12") totalMinutes += 12 * 60;
    if (period === "AM" && hour === "12") totalMinutes -= 12 * 60;
    
    let newHour = Math.floor(totalMinutes / 60) % 24;
    const newMinutes = totalMinutes % 60;
    
    let newPeriod = newHour >= 12 ? "PM" : "AM";
    if (newHour > 12) newHour -= 12;
    if (newHour === 0) newHour = 12;
    
    return `${newHour}:${newMinutes.toString().padStart(2, "0")} ${newPeriod}`;
  };

  // Complete schedule data with stops for each time slot
  const scheduleData: TimeSlot[] = React.useMemo(() => {
    if (!selectedRoute || !selectedDirection) return [];

    const routeNumber = selectedRoute.split(" - ")[0];
    const destinations = routeDestinations[routeNumber];
    
    if (!destinations) return [];

    const isInbound = selectedDirection.toLowerCase() === "inbound";
    const startStation = isInbound ? destinations.inbound : destinations.outbound;
    const endStation = isInbound ? destinations.outbound : destinations.inbound;

    const times = [
      "4:39 AM", "4:57 AM", "4:55 AM", "5:14 AM",
      "5:20 AM", "5:40 AM", "6:00 AM", "6:20 AM"
    ];

    return times.map(time => ({
      startStation,
      startTime: time,
      stops: [
        { station: startStation, time },
        { station: endStation, time: addMinutes(time, 30) }
      ]
    }));
  }, [selectedRoute, selectedDirection]);

  const handleDirectionSelect = (direction: string) => {
    setSelectedDirection(direction);
    setShowDirectionModal(false);
    // Only show weekday modal if no weekday is selected yet
    if (!selectedWeekday) {
      setShowWeekdayModal(true);
    }
  };

  const handleWeekdaySelect = (weekday: string) => {
    setSelectedWeekday(weekday);
    setShowWeekdayModal(false);
  };

  const handleTimeSlotClick = (index: number) => {
    setExpandedTimeSlot(expandedTimeSlot === index ? null : index);
  };
  
  // If no route information, show route selection interface
  if (!selectedRoute) {
    return (
      <div className="flex-1 flex flex-col items-center justify-center p-4">
        <div className="text-gray-400 mb-6">
          <img src="/prototype1/logos/CatslogoBW-1024x282.webp" alt="CATS Logo" className="w-48 h-auto mx-auto" />
        </div>
        <h2 className="text-gray-600 text-xl mb-4">Select a route to get started</h2>
        <button
          onClick={() => navigate("/route")}
          className="w-full p-4 border-2 border-[#0B4EA2] rounded-lg text-center text-[#0B4EA2] font-semibold hover:bg-blue-50"
        >
          Route
        </button>
      </div>
    );
  }

  // Show schedule when both direction and weekday are selected
  const showSchedule = selectedDirection && selectedWeekday;

  // Show direction modal when route is selected but direction isn't
  React.useEffect(() => {
    if (selectedRoute && !selectedDirection) {
      setShowDirectionModal(true);
    }
  }, [selectedRoute, selectedDirection]);

  return (
    <div className="flex flex-col h-full bg-white relative">
      {/* Fixed header */}
      <div className="bg-[#0B4EA2] text-white p-4 flex items-center gap-4">
        <button onClick={() => navigate("/route")}>
          <ArrowLeft size={24} />
        </button>
        <h1 className="text-xl">Schedule</h1>
      </div>

      <div className="flex-1 overflow-y-auto">
        {/* Schedule content */}
        {showSchedule && (
          <div>
            {scheduleData.map((timeSlot, index) => (
              <div key={index} className="mx-4 mt-4">
                <div
                  className="bg-white rounded-lg shadow-md cursor-pointer"
                  onClick={() => handleTimeSlotClick(index)}
                >
                  <div className="p-4">
                    <div className="flex items-center justify-between">
                      <div className="flex items-center gap-3">
                        <div className="w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center">
                          <ChevronRight
                            className={`text-gray-600 transform transition-transform ${expandedTimeSlot === index ? 'rotate-90' : ''}`}
                            size={20}
                          />
                        </div>
                        <span className="text-lg">{timeSlot.startStation}</span>
                      </div>
                      <span className="text-gray-600">{timeSlot.startTime}</span>
                    </div>
                  </div>
                </div>
                {/* Expanded view */}
                {expandedTimeSlot === index && (
                  <div className="mt-2 bg-white rounded-lg shadow-md p-4">
                    {timeSlot.stops.map((stop, stopIndex) => (
                      <div key={stopIndex} className="flex justify-between py-2 border-b last:border-b-0">
                        <span className="text-gray-700">{stop.station}</span>
                        <span className="text-gray-600">{stop.time}</span>
                      </div>
                    ))}
                  </div>
                )}
              </div>
            ))}
          </div>
        )}
      </div>

      {/* Route selection and filters */}
      <div className="px-4 pb-8 pt-4 flex flex-col gap-4 bg-white border-t border-gray-200">
        <button
          onClick={() => navigate("/route")}
          className="w-full p-4 bg-white border border-[#0B4EA2] text-[#0B4EA2] rounded-lg font-bold"
        >
          {selectedRoute}
        </button>
        <div className="grid grid-cols-2 gap-4">
          <button
            onClick={() => setShowDirectionModal(true)}
            className="p-4 bg-white border border-[#0B4EA2] text-[#0B4EA2] rounded-lg font-bold"
          >
            {selectedDirection || "DIRECTION"}
          </button>
          <button
            onClick={() => selectedDirection && setShowWeekdayModal(true)}
            className={`p-4 bg-white border rounded-lg font-bold ${
              selectedDirection
                ? "border-[#0B4EA2] text-[#0B4EA2]"
                : "border-gray-300 text-gray-300"
            }`}
            disabled={!selectedDirection}
          >
            {selectedWeekday || "DAY"}
          </button>
        </div>
      </div>

      {/* Modals */}
      {showDirectionModal && (
        <div className="absolute inset-0 bg-black bg-opacity-50 z-50 flex items-end">
          <div className="w-full bg-white rounded-t-3xl shadow-lg">
            <div className="max-h-[60vh] overflow-y-auto">
              <div className="p-4">
                <h2 className="text-xl mb-4">Select direction</h2>
                <div className="space-y-2">
                  <button
                    onClick={() => handleDirectionSelect("INBOUND")}
                    className="w-full p-4 text-left hover:bg-gray-50 rounded-lg"
                  >
                    INBOUND
                  </button>
                  <button
                    onClick={() => handleDirectionSelect("OUTBOUND")}
                    className="w-full p-4 text-left hover:bg-gray-50 rounded-lg"
                  >
                    OUTBOUND
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      )}

      {showWeekdayModal && (
        <div className="absolute inset-0 bg-black bg-opacity-50 z-50 flex items-end">
          <div className="w-full bg-white rounded-t-3xl shadow-lg">
            <div className="max-h-[60vh] overflow-y-auto">
              <div className="p-4">
                <h2 className="text-xl mb-4">Select day</h2>
                <div className="space-y-2">
                  <button
                    onClick={() => handleWeekdaySelect("WEEKDAYS")}
                    className="w-full p-4 text-left hover:bg-gray-50 rounded-lg"
                  >
                    WEEKDAYS
                  </button>
                  <button
                    onClick={() => handleWeekdaySelect("SATURDAY")}
                    className="w-full p-4 text-left hover:bg-gray-50 rounded-lg"
                  >
                    SATURDAY
                  </button>
                  <button
                    onClick={() => handleWeekdaySelect("SUNDAY")}
                    className="w-full p-4 text-left hover:bg-gray-50 rounded-lg"
                  >
                    SUNDAY
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      )}
    </div>
  );
}


================================================
File: src/components/SettingsDialog.tsx
================================================
import React from "react";
import { Moon, Languages, Bell, Shield, ChevronRight, X } from "lucide-react";
import { useDarkMode } from "../contexts/DarkModeContext";
import { useLanguage } from "../contexts/LanguageContext";
import { useUnitPreference } from "../contexts/UnitPreferenceContext";

interface SettingsDialogProps {
  isOpen: boolean;
  onClose: () => void;
}

export function SettingsDialog({ isOpen, onClose }: SettingsDialogProps) {
  const { isDarkMode, toggleDarkMode } = useDarkMode();
  const { language, setLanguage, t } = useLanguage();
  const { unit, setUnit } = useUnitPreference();
  if (!isOpen) return null;

  return (
    <div className="absolute inset-0 bg-black bg-opacity-50" style={{ zIndex: 1000 }}>
      <div className="absolute bottom-0 left-0 right-0 bg-white dark:bg-gray-800 rounded-t-2xl p-4" style={{ maxHeight: 'calc(100% - 4rem)' }}>
        <div className="flex justify-between items-center mb-6">
          <h2 className="text-xl font-semibold dark:text-white">{t('settings')}</h2>
          <button onClick={onClose} className="text-gray-500 dark:text-gray-400">
            <X size={24} />
          </button>
        </div>
        
        <div className="space-y-4">
          <div className="flex items-center justify-between">
            <div className="flex items-center gap-3">
              <Moon size={20} className="text-gray-600 dark:text-gray-400" />
              <span className="dark:text-white">{t('darkMode')}</span>
            </div>
            <label className="relative inline-flex items-center cursor-pointer">
              <input
                type="checkbox"
                checked={isDarkMode}
                onChange={toggleDarkMode}
                className="sr-only peer"
              />
              <div className="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[#0B4EA2]"></div>
            </label>
          </div>

          <div className="flex items-center justify-between">
            <div className="flex items-center gap-3">
              <Languages size={20} className="text-gray-600 dark:text-gray-400" />
              <span className="dark:text-white">{t('language')}</span>
            </div>
            <select
              value={language}
              onChange={(e) => setLanguage(e.target.value as 'en' | 'es')}
              className="bg-white dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded-md px-2 py-1 border border-gray-300 dark:border-gray-600"
            >
              <option value="en">{t('english')}</option>
              <option value="es">{t('spanish')}</option>
            </select>
          </div>

          <div className="flex items-center justify-between">
            <div className="flex items-center gap-3">
              <Bell size={20} className="text-gray-600 dark:text-gray-400" />
              <span className="dark:text-white">{t('notifications')}</span>
            </div>
            <label className="relative inline-flex items-center cursor-pointer">
              <input type="checkbox" className="sr-only peer" />
              <div className="w-11 h-6 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 dark:after:border-gray-600 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[#0B4EA2]"></div>
            </label>
          </div>

          <div className="flex items-center justify-between">
            <div className="flex items-center gap-3">
              <Shield size={20} className="text-gray-600 dark:text-gray-400" />
              <span className="dark:text-white">{t('preferredMode')}</span>
            </div>
            <select
              value={unit}
              onChange={(e) => setUnit(e.target.value as 'miles' | 'km')}
              className="bg-white dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded-md px-2 py-1 border border-gray-300 dark:border-gray-600"
            >
              <option value="miles">{t('miles')}</option>
              <option value="km">{t('kilometers')}</option>
            </select>
          </div>
        </div>
      </div>
    </div>
  );
}


================================================
File: src/components/SplashScreen.tsx
================================================
import React, { useEffect } from 'react';
import { useNavigate } from 'react-router-dom';
import { Bus, Train } from 'lucide-react';
export function SplashScreen() {
  const navigate = useNavigate();
  useEffect(() => {
    const timer = setTimeout(() => {
      navigate('/history');
    }, 3000);
    return () => clearTimeout(timer);
  }, [navigate]);
  return <div className="flex flex-col items-center justify-center min-h-screen bg-[#0B4EA2] text-white p-4">
      <h1 className="text-5xl font-bold mb-4">CATS</h1>
      <p className="text-2xl mb-8">Buses, trains and streetcar</p>
      <div className="flex gap-8">
        <Bus size={48} />
        <Train size={48} />
        <Train size={48} />
      </div>
    </div>;
}

================================================
File: src/components/StationSelector.tsx
================================================
import React, { useState } from "react";
import { ArrowLeft, Search, ArrowLeftRight } from "lucide-react";
const BLUE_LINE_STATIONS = [{
  id: 1,
  name: "UNC Charlotte Station"
}, {
  id: 2,
  name: "JW Clay Blvd Station"
}, {
  id: 3,
  name: "McCullough Station"
}, {
  id: 4,
  name: "University City Blvd Station"
}, {
  id: 5,
  name: "Tom Hunter Station"
}, {
  id: 6,
  name: "Old Concord Road Station"
}, {
  id: 7,
  name: "Sugar Creek Station"
}, {
  id: 8,
  name: "36th St Station"
}, {
  id: 9,
  name: "25th St Station"
}, {
  id: 10,
  name: "Parkwood Station"
}, {
  id: 11,
  name: "9th Street Station"
}, {
  id: 12,
  name: "7th Street Station"
}, {
  id: 13,
  name: "CTC Station/Arena"
}, {
  id: 14,
  name: "3rd Street Station"
}, {
  id: 15,
  name: "Brooklyn Village Station"
}, {
  id: 16,
  name: "LYNX Carson Station"
}, {
  id: 17,
  name: "Bland Street Station"
}, {
  id: 18,
  name: "LYNX East/West Blvd Station"
}, {
  id: 19,
  name: "New Bern Station"
}, {
  id: 20,
  name: "LYNX Scaleybark Station"
}, {
  id: 21,
  name: "LYNX Woodlawn Station"
}, {
  id: 22,
  name: "LYNX Tyvola Station"
}, {
  id: 23,
  name: "LYNX Archdale Station"
}, {
  id: 24,
  name: "LYNX Arrowood Station"
}, {
  id: 25,
  name: "LYNX Sharon Rd West Station"
}, {
  id: 26,
  name: "LYNX I-485 Station"
}];

export const GOLD_LINE_STATIONS = [{
  id: 1,
  name: "French St Station (CityLYNX)"
}, {
  id: 2,
  name: "Johnson & Wales"
}, {
  id: 3,
  name: "CTC Station/Arena"
}, {
  id: 4,
  name: "Elizabeth & Hawthorne"
}, {
  id: 5,
  name: "Sunnyside Station (CityLYNX)"
}];

const getStationsForRoute = (route: string) => {
  if (route.startsWith("501")) {
    return BLUE_LINE_STATIONS;
  } else if (route.startsWith("510")) {
    return GOLD_LINE_STATIONS;
  }
  return BLUE_LINE_STATIONS; // Default to Blue Line stations
};
interface StationSelectorProps {
  onBack: () => void;
  selectedRoute: string;
  onComplete: (from: string, to: string) => void;
  direction: "UNC Charlotte Main Station" | "I-485/S.Blvd. Station" | "inbound" | "outbound";
}
type SelectionMode = "from" | "to" | null;
export function StationSelector({
  onBack,
  selectedRoute,
  onComplete,
  direction
}: StationSelectorProps) {
  const [fromStation, setFromStation] = useState<string | null>(null);
  const [toStation, setToStation] = useState<string | null>(null);
  const [selectionMode, setSelectionMode] = useState<SelectionMode>(null);
  const [error, setError] = useState<string | null>(null);

  // Get and sort stations based on route and direction
  const stations = getStationsForRoute(selectedRoute);
  const sortedStations = [...stations].sort((a, b) => {
    if (direction === "UNC Charlotte Main Station") {
      // Reverse order when UNC Charlotte is selected
      return b.id - a.id;
    }
    // Normal order when I-485/S.Blvd is selected
    return a.id - b.id;
  });
  const handleStationClick = (stationName: string) => {
    if (selectionMode === "from") {
      setFromStation(stationName);
      setSelectionMode(null);
    } else if (selectionMode === "to") {
      setToStation(stationName);
      setSelectionMode(null);
      // Complete the selection regardless of direction
      onComplete(fromStation!, stationName);
    }
  };
  return <div className="flex flex-col min-h-screen bg-white">
      <div className="bg-[#0B4EA2] text-white p-4 flex items-center gap-4">
        <button onClick={onBack}>
          <ArrowLeft size={24} />
        </button>
        <h1 className="text-xl">
          {selectionMode ? `Select ${selectionMode} station` : "Select a station"}
        </h1>
      </div>
      <div className="border-b">
        <div className="flex">
          <button className="flex-1 py-4 text-[#0B4EA2] border-b-2 border-[#0B4EA2]">
            All Stations
          </button>
          <button className="flex-1 py-4 text-gray-600">History</button>
        </div>
      </div>
      {error && <div className="fixed top-16 left-0 right-0 bg-red-500 text-white p-4 text-center">
          {error}
        </div>}
      <div className="flex-1 bg-gray-50">
        {sortedStations.map(station => <button key={station.id} className={`w-full flex items-center gap-4 p-4 border-b bg-white ${selectionMode ? "hover:bg-gray-50" : ""}`} onClick={() => selectionMode && handleStationClick(station.name)} disabled={!selectionMode}>
            <div className="w-8 h-8 bg-[#0B4EA2] text-white rounded-lg flex items-center justify-center font-bold">
              {station.id}
            </div>
            <span className="text-gray-900">{station.name}</span>
          </button>)}
      </div>
      <div className="p-4 space-y-4">
        <button className="w-full p-4 bg-white border border-[#0B4EA2] text-[#0B4EA2] rounded-lg font-bold">
          {selectedRoute}
        </button>
        <div className="grid grid-cols-2 gap-4">
          <button className={`p-4 bg-white border rounded-lg font-bold ${selectionMode === "from" ? "border-[#0B4EA2] text-[#0B4EA2]" : "border-gray-300 text-gray-500"}`} onClick={() => setSelectionMode("from")}>
            {fromStation || "From"}
          </button>
          <button className={`p-4 bg-white border rounded-lg font-bold ${selectionMode === "to" ? "border-[#0B4EA2] text-[#0B4EA2]" : "border-gray-300 text-gray-500"}`} onClick={() => setSelectionMode("to")}>
            {toStation || "To"}
          </button>
        </div>
      </div>
      <div className="fixed bottom-4 right-4">
        <button className="w-14 h-14 rounded-full bg-[#0B4EA2] text-white flex items-center justify-center shadow-lg">
          <Search size={24} />
        </button>
      </div>
    </div>;
}

================================================
File: src/components/TabBar.tsx
================================================
import React from "react";
import { NavLink, useLocation } from "react-router-dom";

export function TabBar() {
  const location = useLocation();
  const isScheduleActive = location.pathname.startsWith('/schedule') || location.pathname.startsWith('/route');

  return (
    <nav className="flex gap-6">
      <NavLink 
        to="/history" 
        className={({ isActive }) => 
          `pb-2 ${isActive ? "border-b-2 border-[#0B4EA2] text-[#0B4EA2]" : "text-gray-600"}`
        }
      >
        Home
      </NavLink>
      <NavLink 
        to="/upcoming" 
        className={({ isActive }) => 
          `pb-2 ${isActive ? "border-b-2 border-[#0B4EA2] text-[#0B4EA2]" : "text-gray-600"}`
        }
      >
        Upcoming
      </NavLink>
      <NavLink 
        to="/schedule" 
        className={`pb-2 ${isScheduleActive ? "border-b-2 border-[#0B4EA2] text-[#0B4EA2]" : "text-gray-600"}`}
      >
        Schedule
      </NavLink>
      <NavLink 
        to="/map" 
        className={({ isActive }) => 
          `pb-2 ${isActive ? "border-b-2 border-[#0B4EA2] text-[#0B4EA2]" : "text-gray-600"}`
        }
      >
        Map
      </NavLink>
    </nav>
  );
}

================================================
File: src/components/UpcomingRouteSelector.tsx
================================================
import React from "react";
import { useNavigate, useLocation } from "react-router-dom";
import { Bus, ArrowLeft, Search, Train } from "lucide-react";

interface RouteType {
  id: string;
  name: string;
  type: "rail" | "bus";
  color?: string;
}

// Helper function to get numeric value from route id
const getNumericId = (id: string): number => {
  const numericPart = parseInt(id.replace(/[^\d]/g, ''));
  return isNaN(numericPart) ? 0 : numericPart;
};

// Define rail routes
const railRoutes: RouteType[] = [
  {
    id: "501",
    name: "Light Rail - Lynx Blue Line",
    type: "rail",
    color: "text-[#0B4EA2]"
  },
  {
    id: "510",
    name: "CityLYNX Gold Line",
    type: "rail",
    color: "text-yellow-500"
  }
];

// Define bus routes
const unsortedBusRoutes: RouteType[] = [
  { id: "1", name: "Mt. Holly Road", type: "bus" },
  { id: "2", name: "Ashley/Scaleybark Crosstown", type: "bus" },
  { id: "3", name: "The Plaza", type: "bus" },
  { id: "4", name: "Belmont", type: "bus" },
  { id: "5", name: "Airport", type: "bus", color: "text-green-600" },
  { id: "6", name: "Kings Drive", type: "bus" },
  { id: "7", name: "Beatties Ford", type: "bus" },
  { id: "8", name: "Tuckaseegee Road", type: "bus" },
  { id: "9", name: "Central Avenue", type: "bus" },
  { id: "10", name: "West Boulevard", type: "bus" },
  { id: "11", name: "North Tryon", type: "bus" },
  { id: "12", name: "South Blvd", type: "bus" },
  { id: "13", name: "Nevin Rd", type: "bus" },
  { id: "14", name: "Providence Road", type: "bus" },
  { id: "15", name: "Randolph Rd", type: "bus" },
  { id: "16", name: "South Tryon", type: "bus" },
  { id: "18", name: "Paw Creek - Rosa Parks", type: "bus" },
  { id: "19", name: "Park Road", type: "bus" },
  { id: "20", name: "Queens Rd", type: "bus" },
  { id: "21", name: "Statesville Ave", type: "bus" },
  { id: "23", name: "Shamrock Dr", type: "bus" },
  { id: "24", name: "Nations Ford Rd", type: "bus" },
  { id: "26", name: "Oaklawn Ave", type: "bus" },
  { id: "27", name: "Monroe Rd", type: "bus" },
  { id: "29", name: "UNC Charlotte - JW Clay", type: "bus" },
  { id: "30", name: "Woodlawn Crosstown", type: "bus" },
  { id: "35", name: "Wilkinson BLVD", type: "bus" },
  { id: "40", name: "Lawyers RD", type: "bus" },
  { id: "41x", name: "Steele Creek", type: "bus" },
  { id: "48x", name: "Northcross", type: "bus" },
  { id: "50", name: "URP CIC", type: "bus" },
  { id: "51", name: "Pineville Matthews Rd", type: "bus" },
  { id: "52x", name: "Idlewild Rd", type: "bus" },
  { id: "53x", name: "Northlake", type: "bus" },
  { id: "54", name: "University Research Park", type: "bus" },
  { id: "55", name: "Westinghouse", type: "bus" },
  { id: "58", name: "Pineville", type: "bus" },
  { id: "59", name: "North Meck Connector", type: "bus" },
  { id: "60", name: "Tyvola", type: "bus" },
  { id: "62x", name: "Rea Road", type: "bus" },
  { id: "63x", name: "Huntersville", type: "bus" },
  { id: "64x", name: "Independence Blvd", type: "bus" },
  { id: "74x", name: "Union County", type: "bus" },
  { id: "77x", name: "North Meck", type: "bus" },
  { id: "82x", name: "Rock Hill", type: "bus" },
  { id: "88x", name: "Mountain Island", type: "bus" },
  { id: "97", name: "Village Rider", type: "bus" },
  { id: "98", name: "Village Rider McCoy Rd", type: "bus" },
  { id: "99", name: "Village Rider Huntersville", type: "bus" },
  { id: "211", name: "Hidden Valley", type: "bus" },
  { id: "221", name: "E Harris Blvd - Idlewild", type: "bus" },
  { id: "222", name: "Pence Rd", type: "bus" },
  { id: "235", name: "West Charlotte Connector", type: "bus" },
  { id: "290", name: "Davidson Shuttle", type: "bus" }
];

// Sort bus routes by numeric id
const busRoutes = unsortedBusRoutes.sort((a, b) => getNumericId(a.id) - getNumericId(b.id));

// Combine rail and bus routes
const ROUTES: RouteType[] = [...railRoutes, ...busRoutes];

export function UpcomingRouteSelector() {
  const navigate = useNavigate();
  const location = useLocation();
  const { selectingStation } = location.state || {};
  
  return (
    <div className="flex flex-col h-full bg-white">
      <div className="bg-[#0B4EA2] text-white p-4 flex items-center gap-4">
        <button onClick={() => navigate("/upcoming")}>
          <ArrowLeft size={24} />
        </button>
        <h1 className="text-xl">Select a route</h1>
      </div>
      <div className="border-b">
        <div className="flex">
          <button className="flex-1 py-4 text-[#0B4EA2] border-b-2 border-[#0B4EA2]">
            All Routes
          </button>
          <button className="flex-1 py-4 text-gray-600">History</button>
        </div>
      </div>
      <div className="flex-1 bg-gray-50 overflow-y-auto pb-24">
        {ROUTES.map(route => (
          <button
            key={route.id}
            className="w-full flex items-center gap-4 p-4 border-b bg-white"
            onClick={() => {
              const existingState = location.state || {};
              navigate("/upcoming", {
                state: {
                  ...existingState,
                  route: `${route.id} - ${route.name}`,
                  selectingStation: selectingStation || null
                }
              });
            }}
          >
            {route.type === "rail" ? (
              <Train size={20} className={route.color || "text-gray-600"} />
            ) : (
              <Bus size={20} className={route.color || "text-gray-600"} />
            )}
            <span className="text-gray-900">
              {route.id} - {route.name}
            </span>
          </button>
        ))}
      </div>
      <div className="fixed bottom-4 right-4">
        <button className="w-14 h-14 rounded-full bg-[#0B4EA2] text-white flex items-center justify-center shadow-lg">
          <Search size={24} />
        </button>
      </div>
    </div>
  );
}


================================================
File: src/components/UpcomingStationSelector.tsx
================================================
import React, { useState } from "react";
import { ArrowLeft, Search } from "lucide-react";
import { useNavigate, useLocation } from "react-router-dom";

const BLUE_LINE_STATIONS = [{
  id: 1,
  name: "UNC Charlotte Station"
}, {
  id: 2,
  name: "JW Clay Blvd Station"
}, {
  id: 3,
  name: "McCullough Station"
}, {
  id: 4,
  name: "University City Blvd Station"
}, {
  id: 5,
  name: "Tom Hunter Station"
}, {
  id: 6,
  name: "Old Concord Road Station"
}, {
  id: 7,
  name: "Sugar Creek Station"
}, {
  id: 8,
  name: "36th St Station"
}, {
  id: 9,
  name: "25th St Station"
}, {
  id: 10,
  name: "Parkwood Station"
}, {
  id: 11,
  name: "9th Street Station"
}, {
  id: 12,
  name: "7th Street Station"
}, {
  id: 13,
  name: "CTC Station/Arena"
}, {
  id: 14,
  name: "3rd Street Station"
}, {
  id: 15,
  name: "Brooklyn Village Station"
}, {
  id: 16,
  name: "LYNX Carson Station"
}, {
  id: 17,
  name: "Bland Street Station"
}, {
  id: 18,
  name: "LYNX East/West Blvd Station"
}, {
  id: 19,
  name: "New Bern Station"
}, {
  id: 20,
  name: "LYNX Scaleybark Station"
}, {
  id: 21,
  name: "LYNX Woodlawn Station"
}, {
  id: 22,
  name: "LYNX Tyvola Station"
}, {
  id: 23,
  name: "LYNX Archdale Station"
}, {
  id: 24,
  name: "LYNX Arrowood Station"
}, {
  id: 25,
  name: "LYNX Sharon Rd West Station"
}, {
  id: 26,
  name: "LYNX I-485 Station"
}];

const GOLD_LINE_STATIONS = [{
  id: 1,
  name: "French St Station (CityLYNX)"
}, {
  id: 2,
  name: "Johnson & Wales"
}, {
  id: 3,
  name: "CTC Station/Arena"
}, {
  id: 4,
  name: "Elizabeth & Hawthorne"
}, {
  id: 5,
  name: "Sunnyside Station (CityLYNX)"
}];

const getStationsForRoute = (route: string) => {
  if (route.startsWith("501")) {
    return BLUE_LINE_STATIONS;
  } else if (route.startsWith("510")) {
    return GOLD_LINE_STATIONS;
  }
  return BLUE_LINE_STATIONS; // Default to Blue Line stations
};

export function UpcomingStationSelector() {
  const navigate = useNavigate();
  const location = useLocation();
  const { route, selectingStation } = location.state || {};
  const [selectedStation, setSelectedStation] = useState<string | null>(null);

  const stations = getStationsForRoute(route || "");

  const handleStationSelect = (stationName: string) => {
    navigate("/upcoming", {
      state: {
        ...location.state,
        [selectingStation === "from" ? "fromStation" : "toStation"]: stationName
      }
    });
  };

  return (
    <div className="flex flex-col h-full">
      <div className="flex-shrink-0 bg-[#0B4EA2] text-white p-4 flex items-center gap-4">
        <button onClick={() => navigate("/upcoming", { state: location.state })}>
          <ArrowLeft size={24} />
        </button>
        <h1 className="text-xl">Select a station</h1>
      </div>

      <div className="flex-shrink-0 border-b">
        <div className="flex">
          <button className="flex-1 py-4 text-[#0B4EA2] border-b-2 border-[#0B4EA2]">
            All Stations
          </button>
          <button className="flex-1 py-4 text-gray-600">History</button>
        </div>
      </div>

      <div className="flex-1 min-h-0">
        <div className="h-full overflow-y-auto bg-gray-50">
          {stations.map(station => (
            <button
              key={station.id}
              className="w-full flex items-center gap-4 p-4 border-b bg-white hover:bg-gray-50"
              onClick={() => handleStationSelect(station.name)}
            >
              <div className="w-8 h-8 bg-[#0B4EA2] text-white rounded-lg flex items-center justify-center font-bold">
                {station.id}
              </div>
              <span className="text-gray-900">{station.name}</span>
            </button>
          ))}
        </div>
      </div>

      <div className="flex-shrink-0 px-4 pb-8 pt-4 bg-white border-t border-gray-200">
        <div className="flex justify-end">
          <button className="w-14 h-14 rounded-full bg-[#0B4EA2] text-white flex items-center justify-center shadow-lg">
            <Search size={24} />
          </button>
        </div>
      </div>
    </div>
  );
}


================================================
File: src/components/UpcomingView.tsx
================================================
import React, { useState } from "react";
import { Train, Bus } from "lucide-react";
import { useLocation, useNavigate } from "react-router-dom";

interface TimeEntry {
  minutes: number;
  startTime: string;
  endTime: string;
  duration: string;
}

const TIMES: TimeEntry[] = [{
  minutes: 13,
  startTime: "12:11 PM",
  endTime: "1:10 PM",
  duration: "59 min"
}, {
  minutes: 33,
  startTime: "12:31 PM",
  endTime: "1:30 PM",
  duration: "59 min"
}, {
  minutes: 53,
  startTime: "12:51 PM",
  endTime: "1:50 PM",
  duration: "59 min"
}, {
  minutes: 73,
  startTime: "1:11 PM",
  endTime: "2:10 PM",
  duration: "59 min"
}, {
  minutes: 93,
  startTime: "1:31 PM",
  endTime: "2:30 PM",
  duration: "59 min"
}];

interface UpcomingViewProps {
  savedRoutes: string[];
  setSavedRoutes: React.Dispatch<React.SetStateAction<string[]>>;
}

export function UpcomingView({
  savedRoutes,
  setSavedRoutes
}: UpcomingViewProps) {
  const location = useLocation();
  const navigate = useNavigate();
  const [selectedRoutes, setSelectedRoutes] = useState<number[]>([]);
  const routeInfo = location.state || {};
  const isRailRoute = routeInfo.route?.toLowerCase().includes("rail") || routeInfo.route?.toLowerCase().includes("lynx");

  const handleSaveSelected = () => {
    const routeString = `${routeInfo.route}: ${routeInfo.fromStation} to ${routeInfo.toStation}`;
    if (!savedRoutes.includes(routeString)) {
      setSavedRoutes(prev => [...prev, routeString]);
    }
    setSelectedRoutes([]);
  };

  // If no route information, show route selection interface
  if (!routeInfo.route) {
    return (
      <div className="flex-1 flex flex-col items-center justify-center p-4">
        <div className="text-gray-400 mb-6">
          <img src="/prototype1/logos/CatslogoBW-1024x282.webp" alt="CATS Logo" className="w-48 h-auto mx-auto" />
        </div>
        <h2 className="text-gray-600 text-xl mb-4">Select a route to get started</h2>
        <button
          onClick={() => navigate("/upcoming/route")}
          className="w-full p-4 border-2 border-[#0B4EA2] rounded-lg text-center text-[#0B4EA2] font-semibold hover:bg-blue-50"
        >
          Route
        </button>
      </div>
    );
  }

  // If no stations selected, show station selection interface
  if (!routeInfo.fromStation || !routeInfo.toStation) {
    return (
      <div className="flex flex-col h-full bg-white">
        <div className="flex-1 overflow-y-auto pb-32">
          <div className="flex flex-col items-center justify-center p-4">
            <div className="text-gray-400 mb-6">
              <img src="/prototype1/logos/CatslogoBW-1024x282.webp" alt="CATS Logo" className="w-48 h-auto mx-auto" />
            </div>
            <h2 className="text-gray-600 text-xl mb-4">Select stations</h2>
          </div>
        </div>
        <div className="fixed bottom-0 left-0 right-0 p-4 space-y-4 bg-white border-t border-gray-200">
          <button 
            onClick={() => navigate("/upcoming/route")}
            className="w-full p-4 bg-white border border-[#0B4EA2] text-[#0B4EA2] rounded-lg font-bold"
          >
            {routeInfo.route}
          </button>
          <div className="grid grid-cols-2 gap-4">
            <button 
              onClick={() => navigate("/upcoming/station", {
                state: {
                  ...routeInfo,
                  selectingStation: "from"
                }
              })}
              className={`p-4 bg-white border rounded-lg font-bold ${
                routeInfo.fromStation
                  ? 'border-[#0B4EA2] text-[#0B4EA2]'
                  : 'border-gray-300 text-gray-500'
              }`}
            >
              {routeInfo.fromStation || "From"}
            </button>
            <button 
              onClick={() => navigate("/upcoming/station", {
                state: {
                  ...routeInfo,
                  selectingStation: "to"
                }
              })}
              className={`p-4 bg-white border rounded-lg font-bold ${
                routeInfo.toStation
                  ? 'border-[#0B4EA2] text-[#0B4EA2]'
                  : 'border-gray-300 text-gray-500'
              }`}
            >
              {routeInfo.toStation || "To"}
            </button>
          </div>
        </div>
      </div>
    );
  }

  // Show upcoming times view
  return (
    <div className="flex flex-col h-full bg-white">
      <div className="flex-1 overflow-y-auto pb-32">
        <div className="p-4 space-y-4">
          {selectedRoutes.length > 0 && (
            <button
              onClick={handleSaveSelected}
              className="w-full bg-[#0B4EA2] text-white rounded-lg p-3 font-semibold"
            >
              Save Selected Routes ({selectedRoutes.length})
            </button>
          )}
          {TIMES.map((time, index) => (
            <div key={index} className="bg-white rounded-lg shadow-sm p-4 flex items-start gap-3">
              <input
                type="checkbox"
                className="mt-2 mr-2"
                checked={selectedRoutes.includes(index)}
                onChange={(e) => {
                  setSelectedRoutes(prev =>
                    e.target.checked
                      ? [...prev, index]
                      : prev.filter(i => i !== index)
                  );
                }}
              />
              {isRailRoute ? (
                <Train size={20} className="text-[#0B4EA2] mt-1" />
              ) : (
                <Bus size={20} className="text-gray-600 mt-1" />
              )}
              <div className="flex-1">
                <div className="flex justify-between">
                  <div>
                    <h3 className="font-medium">{routeInfo.fromStation}</h3>
                    <p className="text-sm text-gray-500">To {routeInfo.toStation}</p>
                  </div>
                  <div className="text-right">
                    <span className="text-xl font-bold">{time.minutes}</span>
                    <p className="text-sm text-gray-500">minutes</p>
                  </div>
                </div>
                <p className="text-sm text-gray-500 mt-1">
                  {time.startTime} - {time.endTime} ({time.duration})
                </p>
              </div>
            </div>
          ))}
        </div>
      </div>
      <div className="fixed bottom-0 left-0 right-0 p-4 space-y-4 bg-white border-t border-gray-200">
        <button
          onClick={() => navigate("/upcoming/route")}
          className="w-full p-4 bg-white border border-[#0B4EA2] text-[#0B4EA2] rounded-lg font-bold"
        >
          {routeInfo.route}
        </button>
        <div className="grid grid-cols-2 gap-4">
          <button 
            onClick={() => navigate("/upcoming/station", {
              state: {
                ...routeInfo,
                selectingStation: "from"
              }
            })}
            className="p-4 bg-white border border-[#0B4EA2] text-[#0B4EA2] rounded-lg font-bold"
          >
            {routeInfo.fromStation}
          </button>
          <button 
            onClick={() => navigate("/upcoming/station", {
              state: {
                ...routeInfo,
                selectingStation: "to"
              }
            })}
            className="p-4 bg-white border border-[#0B4EA2] text-[#0B4EA2] rounded-lg font-bold"
          >
            {routeInfo.toStation}
          </button>
        </div>
      </div>
    </div>
  );
}


================================================
File: src/components/ZoomableImage.tsx
================================================
import React, { useState } from "react";
import { TransformWrapper, TransformComponent } from "react-zoom-pan-pinch";
interface ZoomableImageProps {
  src: string;
  alt: string;
}
export function ZoomableImage({
  src,
  alt
}: ZoomableImageProps) {
  return <TransformWrapper initialScale={1} minScale={0.5} maxScale={4} centerOnInit={true}>
      <TransformComponent>
        <img src={src} alt={alt} className="w-full h-auto" />
      </TransformComponent>
    </TransformWrapper>;
}

================================================
File: src/contexts/DarkModeContext.tsx
================================================
import React, { createContext, useContext, useState, useEffect } from 'react';

interface DarkModeContextType {
  isDarkMode: boolean;
  toggleDarkMode: () => void;
}

const DarkModeContext = createContext<DarkModeContextType | undefined>(undefined);

export function DarkModeProvider({ children }: { children: React.ReactNode }) {
  // Initialize from localStorage or default to false
  const [isDarkMode, setIsDarkMode] = useState(() => {
    const saved = localStorage.getItem('darkMode');
    return saved ? JSON.parse(saved) : false;
  });

  // Update localStorage and document class when dark mode changes
  useEffect(() => {
    localStorage.setItem('darkMode', JSON.stringify(isDarkMode));
    if (isDarkMode) {
      document.documentElement.classList.add('dark');
    } else {
      document.documentElement.classList.remove('dark');
    }
  }, [isDarkMode]);

  const toggleDarkMode = () => {
    setIsDarkMode((prev: boolean) => !prev);
  };

  return (
    <DarkModeContext.Provider value={{ isDarkMode, toggleDarkMode }}>
      {children}
    </DarkModeContext.Provider>
  );
}

export function useDarkMode() {
  const context = useContext(DarkModeContext);
  if (context === undefined) {
    throw new Error('useDarkMode must be used within a DarkModeProvider');
  }
  return context;
}

================================================
File: src/contexts/LanguageContext.tsx
================================================
import React, { createContext, useContext, useState, useEffect } from 'react';

type Language = 'en' | 'es';

interface Translations {
  [key: string]: {
    en: string;
    es: string;
  };
}

const translations: Translations = {
  settings: {
    en: 'Settings',
    es: 'Configuración'
  },
  darkMode: {
    en: 'Dark Mode',
    es: 'Modo Oscuro'
  },
  language: {
    en: 'Language',
    es: 'Idioma'
  },
  notifications: {
    en: 'Notifications',
    es: 'Notificaciones'
  },
  preferredMode: {
    en: 'Preferred Mode',
    es: 'Modo Preferido'
  },
  english: {
    en: 'English',
    es: 'Inglés'
  },
  spanish: {
    en: 'Spanish',
    es: 'Español'
  },
  miles: {
    en: 'Miles',
    es: 'Millas'
  },
  kilometers: {
    en: 'Kilometers',
    es: 'Kilómetros'
  },
  // Route-related translations
  inbound: {
    en: 'Inbound to',
    es: 'Hacia'
  },
  outbound: {
    en: 'Outbound to',
    es: 'Hacia'
  },
  station: {
    en: 'Station',
    es: 'Estación'
  },
  distance: {
    en: 'Distance',
    es: 'Distancia'
  },
  away: {
    en: 'away',
    es: 'de distancia'
  },
  stops: {
    en: 'stops',
    es: 'paradas'
  },
  route: {
    en: 'Route',
    es: 'Ruta'
  },
  direction: {
    en: 'Direction',
    es: 'Dirección'
  },
  day: {
    en: 'Day',
    es: 'Día'
  },
  weekdays: {
    en: 'WEEKDAYS',
    es: 'DE LUNES A VIERNES'
  },
  saturday: {
    en: 'SATURDAY',
    es: 'SÁBADO'
  },
  sunday: {
    en: 'SUNDAY',
    es: 'DOMINGO'
  },
  showSchedule: {
    en: 'Show Schedule',
    es: 'Mostrar Horario'
  },
  selectRoute: {
    en: 'Select a route',
    es: 'Seleccionar una ruta'
  },
  busRoutes: {
    en: 'Bus Routes',
    es: 'Rutas de Autobús'
  },
  blueLineRoute: {
    en: 'Blue Line Route',
    es: 'Ruta de Línea Azul'
  },
  goldLineRoute: {
    en: 'Gold Line Route',
    es: 'Ruta de Línea Dorada'
  }
};

interface LanguageContextType {
  language: Language;
  setLanguage: (lang: Language) => void;
  t: (key: string) => string;
}

const LanguageContext = createContext<LanguageContextType | undefined>(undefined);

export function LanguageProvider({ children }: { children: React.ReactNode }) {
  const [language, setLanguage] = useState<Language>(() => {
    const saved = localStorage.getItem('language');
    return (saved as Language) || 'en';
  });

  useEffect(() => {
    localStorage.setItem('language', language);
  }, [language]);

  const t = (key: string): string => {
    return translations[key]?.[language] || key;
  };

  return (
    <LanguageContext.Provider value={{ language, setLanguage, t }}>
      {children}
    </LanguageContext.Provider>
  );
}

export function useLanguage() {
  const context = useContext(LanguageContext);
  if (context === undefined) {
    throw new Error('useLanguage must be used within a LanguageProvider');
  }
  return context;
}


================================================
File: src/contexts/UnitPreferenceContext.tsx
================================================
import React, { createContext, useContext, useState, useEffect } from 'react';

type UnitType = 'miles' | 'km';

interface UnitPreferenceContextType {
  unit: UnitType;
  setUnit: (unit: UnitType) => void;
  convertDistance: (distance: number) => string;
}

const UnitPreferenceContext = createContext<UnitPreferenceContextType | undefined>(undefined);

export function UnitPreferenceProvider({ children }: { children: React.ReactNode }) {
  const [unit, setUnit] = useState<UnitType>(() => {
    const saved = localStorage.getItem('distanceUnit');
    return (saved as UnitType) || 'miles';
  });

  useEffect(() => {
    localStorage.setItem('distanceUnit', unit);
  }, [unit]);

  const convertDistance = (distance: number): string => {
    if (unit === 'km') {
      const km = distance * 1.60934;
      return `${km.toFixed(1)} km`;
    }
    return `${distance.toFixed(1)} mi`;
  };

  return (
    <UnitPreferenceContext.Provider value={{ unit, setUnit, convertDistance }}>
      {children}
    </UnitPreferenceContext.Provider>
  );
}

export function useUnitPreference() {
  const context = useContext(UnitPreferenceContext);
  if (context === undefined) {
    throw new Error('useUnitPreference must be used within a UnitPreferenceProvider');
  }
  return context;
}


================================================
File: src/data/routeDestinations.ts
================================================
interface RouteDestination {
  inbound: string;
  outbound: string;
}

export const routeDestinations: { [key: string]: RouteDestination } = {
  "501": {
    inbound: "UNC Charlotte Station",
    outbound: "LYNX I-485 Station"
  },
  "510": {
    inbound: "French St Station (CityLynx)",
    outbound: "Sunnyside Station (CityLYNX)"
  },
  "1": {
    inbound: "Charlotte Transportation Center",
    outbound: "Callabridge Commons"
  },
  "2": {
    inbound: "LYNX Scaleybark Station",
    outbound: "Thriftwood & Freedom"
  },
  "3": {
    inbound: "Albemarle & Lawyers Park",
    outbound: "Center & Kentucky"
  },
  "4": {
    inbound: "Charlotte Transportation Center",
    outbound: "Sugar Creek Station"
  },
  "5": {
    inbound: "Charlotte Transportation Center",
    outbound: "Airport Terminal"
  },
  "6": {
    inbound: "Charlotte Transportation Center",
    outbound: "Carolinas Medical Center"
  },
  "7": {
    inbound: "Charlotte Transportation Center",
    outbound: "Harris Corners Parkway / Northlake Mall"
  },
  "8": {
    inbound: "Charlotte Transportation Center",
    outbound: "Little Rock Scott Futrell"
  },
  "9": {
    inbound: "Charlotte Transportation Center",
    outbound: "Albemarle & Lawyers Park"
  },
  "10": {
    inbound: "Charlotte Transportation Center",
    outbound: "New Renaissance & burnette"
  },
  "11": {
    inbound: "Charlotte Transportation Center",
    outbound: "Walmart University Pointe"
  },
  "12": {
    inbound: "LYNX I-485 Station",
    outbound: "Rosethorne & Pressley"
  },
  "13": {
    inbound: "Sugar Creek Station",
    outbound: "Braden & Milan"
  },
  "14": {
    inbound: "Charlotte Transportation Center",
    outbound: "Arboretum Shopping Center"
  },
  "15": {
    inbound: "Charlotte Transportation Center",
    outbound: "Cotswold Shopping Center"
  },
  "16": {
    inbound: "Charlotte Transportation Center",
    outbound: "CMC-Steelecroft"
  },
  "17": {
    inbound: "Charlotte Transportation Center",
    outbound: "Mathews-Independence Pointe P&R"
  },
  "18": {
    inbound: "Rosa Parks Place CTC",
    outbound: "Callabridge Commons"
  },
  "19": {
    inbound: "Charlotte Transportation Center",
    outbound: "SouthPart CTC/Carolina Place Mall"
  },
  "20": {
    inbound: "Charlotte Transportation Center",
    outbound: "Quail Corners Shopping Ctr"
  },
  "21": {
    inbound: "Charlotte Transportation Center",
    outbound: "Sugar Creek & Harris"
  },
  "22": {
    inbound: "Charlotte Transportation Center",
    outbound: "JW Clay Park and Ride"
  },
  "23": {
    inbound: "Charlotte Transportation Center",
    outbound: "CPCC Cato Campus"
  },
  "24": {
    inbound: "LYNX Woodlawn Station",
    outbound: "LYNX Arrowood Station"
  },
  "26": {
    inbound: "Charlotte Transportation Center",
    outbound: "Rosa Parks Place CTC"
  },
  "27": {
    inbound: "Charlotte Transportation Center",
    outbound: "Mathews-Mint Hill & Independence Pointe"
  },
  "28": {
    inbound: "Southpark CTC",
    outbound: "Eastland CTC"
  },
  "29": {
    inbound: "Walmart Independence",
    outbound: "JW Clay Park and Ride"
  },
  "30": {
    inbound: "Carrowmore & Thornton",
    outbound: "Southpark CTC"
  },
  "34": {
    inbound: "Charlotte Transportation Center",
    outbound: "Paw Creek Shopping Center"
  },
  "35": {
    inbound: "Charlotte Transportation Center",
    outbound: "Amazon Packaging Center/Amazon - Tuckaseegee"
  },
  "39": {
    inbound: "Old Concord Road Station",
    outbound: "Billingsley & Randolph"
  },
  "40x": {
    inbound: "Johnson Wales Way",
    outbound: "Lawyers & NC 51"
  },
  "41x": {
    inbound: "4rd & McDowell",
    outbound: "CMC-Steelcroft"
  },
  "42": {
    inbound: "LYNX I-485 Station",
    outbound: "Southpoint Business Park"
  },
  "43": {
    inbound: "LYNX Sharon Rd West Station",
    outbound: "Ballantyne"
  },
  "46x": {
    inbound: "Johnson and Wales Way",
    outbound: "Cambridge Commons"
  },
  "47x": {
    inbound: "JW Clay Park and Ride",
    outbound: "JW Clay Park and Ride/Metrolina Greenhouse"
  },
  "48x": {
    inbound: "3rd & McDowell",
    outbound: "Northcross Park and Ride"
  },
  "50": {
    inbound: "University City Blvd Station",
    outbound: "Mallard Creek Park and Ride"
  },
  "51": {
    inbound: "CPCC Levine/Matthews-Independence Pointe P&R",
    outbound: "Carolina Place Mall"
  },
  "52x": {
    inbound: "Johnson and Wales Way",
    outbound: "Margret Wallace"
  },
  "53x": {
    inbound: "3rd & McDowell/Charlotte Transportation Center",
    outbound: "Ridge Rd Park and Ride/Johnson Oehler"
  },
  "54": {
    inbound: "University City Blvd Station",
    outbound: "Concord Mills"
  },
  "55": {
    inbound: "LYNX Sharon Rd West Station",
    outbound: "Westlake & Display/Charlotte Premium Outlets"
  },
  "56": {
    inbound: "LYNX Arrowood Station",
    outbound: "Charlotte Premium Outlets"
  },
  "57": {
    inbound: "SouthPark CTC",
    outbound: "Forest Point Dr & Arrowood Rd"
  },
  "58": {
    inbound: "LYNX I-485 Station",
    outbound: "Carolina Place Mall"
  },
  "59": {
    inbound: "Walmart Huntersville",
    outbound: "JW Clay Park and Ride"
  },
  "60": {
    inbound: "LYNX Tyvola Station",
    outbound: "Airport Terminal"
  },
  "61x": {
    inbound: "Johnson and Wales Way",
    outbound: "Waverly Shopping Center"
  },
  "62x": {
    inbound: "Johnson and Wales Way/Charlotte Transportation Center",
    outbound: "St. Matthew Church Park and Ride"
  },
  "63x": {
    inbound: "3rd & McDowell",
    outbound: "Huntersville-Gateway Park and Ride"
  },
  "64x": {
    inbound: "Johnson and Wales Way",
    outbound: "John & Trade (Matthews)"
  },
  "74x": {
    inbound: "Johnson and Wales Way/Charlotte Transportation Center",
    outbound: "Union Towne Center"
  },
  "77x": {
    inbound: "3rd & McDowell",
    outbound: "Davidson Gateway Park and Ride"
  },
  "82x": {
    inbound: "3rd & McDowell/Charlotte Transportation Center",
    outbound: "White Street Park and Ride"
  },
  "85x": {
    inbound: "3rd & McDowell/Charlotte Transportation Center",
    outbound: "Gastonia Transportation Center"
  },
  "88x": {
    inbound: "3rd & McDowell",
    outbound: "Riverbend Park and Ride"
  },
  "97": {
    inbound: "Huntersville-Gateway Park and Ride",
    outbound: "Griffith & Jackson"
  },
  "98": {
    inbound: "Huntersville-Gateway Park and Ride",
    outbound: "Walmart Huntersville"
  },
  "99": {
    inbound: "Griffith & Jackson",
    outbound: "Northlake Mall"
  },
  "211": {
    inbound: "Sugar Creek Station",
    outbound: "Tryon & Tom Hunter"
  },
  "221": {
    inbound: "Eastland CTC",
    outbound: "Walmart Independence"
  },
  "222": {
    inbound: "Eastland CTC",
    outbound: "Target on Albemarle Road"
  },
  "235": {
    inbound: "Nobles Avenue",
    outbound: "Ashley Rd & Alleghany St"
  },
  "290": {
    inbound: "Griffith & Jackson",
    outbound: "Concord Rd"
  }
};

================================================
File: src/utils/formatDistance.tsx
================================================
import { useLanguage } from '../contexts/LanguageContext';
import { useUnitPreference } from '../contexts/UnitPreferenceContext';

export function useFormatDistance() {
  const { t } = useLanguage();
  const { unit, convertDistance } = useUnitPreference();

  const formatDistance = (distance: number, includeUnit = true): string => {
    const formattedDistance = convertDistance(distance);
    if (!includeUnit) {
      return formattedDistance.split(' ')[0]; // Return just the number
    }
    return formattedDistance;
  };

  const formatDistanceWithText = (distance: number): string => {
    const formattedDistance = formatDistance(distance);
    return `${formattedDistance} ${t('away')}`;
  };

  return {
    formatDistance,
    formatDistanceWithText
  };
}


